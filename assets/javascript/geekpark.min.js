"use strict";$(function(){window.GeekPark={slideToDom:function(a,b,c){"function"==typeof c?$("html,body").animate({scrollTop:parseInt($(a).offset().top-b)+"px"},800).promise().done(function(){c()}):$("html,body").animate({scrollTop:parseInt($(a).offset().top-b)+"px"},800)},isRetinaDisplay:function(){if(window.matchMedia){var a=window.matchMedia("only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)");return a&&a.matches||window.devicePixelRatio>1?!0:!1}},alertTip:function(a,b,c){var d=document.createElement("div"),e=$("body"),f={open:function(){$("#gptip").length||(e.append('<div id="gptip"><div class="gptip-title">'+a+'<a href="javascript:;" class="fa fa-close gptip-close"></a></div><div class="gptip-content">'+b+'</div><a href="javascript:;" class="confirm">确&nbsp;&nbsp;定</a></div>'),$(d).attr("id","gptip-mask"),$(d).addClass("gptip-mask"),e.append(d)),$("#gptip").addClass("on"),$("#gptip-mask").addClass("on")},close:function(){$("#gptip-mask").fadeOut(300),$("#gptip").fadeOut(300),setTimeout(function(){$("#gptip").remove(),$("#gptip-mask").remove()},400)}};f.open(),$("#gptip a.confirm,#gptip a.gptip-close,#gptip-mask").click(function(){f.close()}),"error"==c&&$("#gptip").addClass("error")},share:{openWindow:function(a){window.open(a,"","width=700, height=400, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no")},run:function(a,b){var c=this,d={weibo:"http://service.weibo.com/share/share.php?url=<%= url %>&appkey=3896321144&title=<%= title %>&pic=<%= imageURL %>&ralateUid=1735559201",twitter:"https://twitter.com/share?url=<%= url %>&text=<%= title %>"};if(a=a||"wechat",b=$.extend({title:"GeekPark",url:window.location.href,imageURL:""},b),$.inArray(a,Object.keys(d))>-1){var e=_.template(d[a]);c.openWindow(e(b))}}},loadingBtn:{createNew:function(a,b){var c='<img src="'+b+'" style="display: hidden" />';a.after(c);var d=a.next(".loading-img");return{loading:function(){a.hide(),d.show()},done:function(){d.hide(),a.show()}}}},isWechat:function(){var a=navigator.userAgent.toLowerCase();return/micromessenger/.test(a)?!0:!1},stringTrim:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")},arrrayShuffle:function(a){for(var b=a.length-1;b>=0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[c];a[c]=a[b],a[b]=d}return a},loadTemplate:function(a,b){$.ajax({url:a,dataType:"html"}).done(function(a){b(a)}).fail(function(){console.error("Load "+a+" failure .")})},isPage:function(a){return $("body").hasClass(a)?!0:!1},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?!0:!1},reload:function(){document.location.reload(!0)},countDown:function(a){function b(){d.getTotal()>0?d.minus():"function"==typeof a.callback&&(a.callback(),window.clearInterval(c)),$(a.dom).text(d.getTotal())}var c=window.setInterval(b,1e3),d=function(){var b=a.total||5;return{minus:function(){b-=1},getTotal:function(){return b}}}()}},function(a,b){function c(a,b){var c=b.split("|"),e=a.val(),f=0,g=0;a.data("valid",0);for(var h=0;h<c.length;h++){var i=d(c[h],e);f++,i&&g++}return f==g?(a.data("valid",1),!0):!1}function d(b,c){switch(b){case"required":return c.length>0?!0:!1;case"mobile":return/^1\d{10}$/.test(c);case"email":return/^[^@]+@([^@\.]+\.)+[^@\.]+$/.test(c);case"repeat-password":return c==a("#password").val()&&0!==c.length;default:if(/^min\d+$/i.test(b))return c.length>=b.match(/\d+/)[0];if(/^max\d+$/i.test(b))return c.length<=b.match(/\d+/)[0]}}function e(b){var c=0,d=0;return b.find("input").each(function(){var b=a(this).data("validate");b&&(c++,1==a(this).data("valid")&&d++)}),c==d&&0!==d}function f(a){a.hasClass("error")||a.addClass("error"),a.hasClass("shakeonce")||a.addClass("shakeonce"),a.on("webkitAnimationEnd",function(){a.removeClass("shakeonce")})}function g(a){a.removeClass("error")}function h(a,b){a?g(b):f(b)}b.formValidator=function(b){function d(b){b.find("input").each(function(){var b=a(this).data("validate");if(b){var d=c(a(this),b);h(d,a(this))}})}if(0===a(b.form).length||"function"!=typeof b.callback)return console.error("formValidator.argument error"),!1;var f=a(b.form);f.on("submit",function(a){a.preventDefault(),e(f)?b.callback():d(f)}),f.find("input").each(function(){var b=a(this).data("validate");if("string"==typeof b){var d;"string"==typeof a(this).attr("autofocus")?a(this).blur(function(){d=c(a(this),b),h(d,a(this))}):a(this).focus(function(){g(a(this)),a(this).blur(function(){d=c(a(this),b),h(d,a(this))})})}})}}(jQuery,GeekPark)});