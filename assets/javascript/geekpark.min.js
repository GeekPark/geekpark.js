"use strict";$(function(){window.GeekPark={slideToDom:function(a,b,c){"function"==typeof c?$("html,body").animate({scrollTop:parseInt($(a).offset().top-b)+"px"},800).promise().done(function(){c()}):$("html,body").animate({scrollTop:parseInt($(a).offset().top-b)+"px"},800)},isRetinaDisplay:function(){if(window.matchMedia){var a=window.matchMedia("only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)");return a&&a.matches||window.devicePixelRatio>1?!0:!1}},whichTransitionEvent:function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]},alertTip:function(a,b,c){var d=document.createElement("div"),e=$("body"),f={open:function(){$("#gptip").length||(e.append('<div id="gptip"><div class="gptip-title">'+a+'<a href="javascript:;" class="fa fa-close gptip-close"></a></div><div class="gptip-content">'+b+'</div><a href="javascript:;" class="confirm">确&nbsp;&nbsp;定</a></div>'),$(d).attr("id","gptip-mask"),$(d).addClass("gptip-mask"),e.append(d)),$("#gptip").addClass("on"),$("#gptip-mask").addClass("on")},close:function(){$("#gptip-mask").fadeOut(300),$("#gptip").fadeOut(300),setTimeout(function(){$("#gptip").remove(),$("#gptip-mask").remove()},400)}};f.open(),$("#gptip a.confirm,#gptip a.gptip-close,#gptip-mask").click(function(){f.close()}),"error"==c&&$("#gptip").addClass("error")},share:{openWindow:function(a){window.open(a,"","width=700, height=400, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no")},run:function(a,b){var c=this,d={weibo:"http://service.weibo.com/share/share.php?url=<%= url %>&appkey=3896321144&title=<%= title %>&pic=<%= imageURL %>&ralateUid=1735559201",twitter:"https://twitter.com/share?url=<%= url %>&text=<%= title %>"};if(a=a||"wechat",b=$.extend({title:"GeekPark",url:location.protocol+"//"+location.hostname+location.pathname,imageURL:""},b),$.inArray(a,Object.keys(d))>-1){var e=_.template(d[a]);c.openWindow(e(b))}}},loadingBtn:{createNew:function(a,b){var c='<img src="'+b+'" style="display: hidden" />';a.after(c);var d=a.next(".loading-img");return{loading:function(){a.hide(),d.show()},done:function(){d.hide(),a.show()}}}},isWechat:function(){var a=navigator.userAgent.toLowerCase();return/micromessenger/.test(a)?!0:!1},stringTrim:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")},arrrayShuffle:function(a){for(var b=a.length-1;b>=0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[c];a[c]=a[b],a[b]=d}return a}},GeekPark.changeWechatShare=function(a){GeekPark.isWechat()&&document.addEventListener("WeixinJSBridgeReady",function(){a.title=a.title?a.title:document.title,a.desc=a.desc?a.desc:$("meta[name=description]").attr("content"),a.link=a.link?a.link:window.location.href,WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",{title:a.title,desc:a.desc,link:a.link,img_url:a.img_url,img_width:"160",img_height:"160"},function(a){_report("timeline",a.err_msg)})}),WeixinJSBridge.on("menu:share:timeline",function(){WeixinJSBridge.invoke("shareTimeline",{title:a.title,desc:a.desc,link:a.link,img_url:a.img_url,img_width:"160",img_height:"160"},function(a){_report("timeline",a.err_msg)})})},!1)}});